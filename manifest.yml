applications:
- name: mdw-demo
  instances: 1
  host: mdw-demo
  buildpack: https://github.com/cloudfoundry/java-buildpack.git
  timeout: 180
  path: mdw-boot-6.1.01-SNAPSHOT.jar

env:
  JAVA_OPTS: -Dmdw.runtime.env=appFogDev -Dmdw.property.manager=com.centurylink.mdw.config.YamlPropertyManager -Dmdw.server.port=$PORT
  
  JBP_CONFIG_SPRING_AUTO_RECONFIGURATION: "[enabled: false]"
  
  MDW_ASSET_LOCATION: "repo/assets"
  
  mdw_settings: |
    application:
      name: mdw-demo
    
    servers:
      mdw-demo.useast.appfog.ctl.io:
        ports:
        - 80
    
    container:
      datasource.provider: Tomcat
      messenger: jms
      jms.provider: ActiveMQ
      threadpool.provider: MDW
      
    database:
      driver: org.mariadb.jdbc.Driver
      url: jdbc:mariadb://localhost:3308/mdw
      username: mdw
      password: mdw
      poolsize: 20
      poolMaxIdle: 3
      
    git:
      local.path: ./repo
      remote.url: https://github.com/CenturyLinkCloud/mdw-demo.git
      branch: master
      user: anonymous
      
    temp.dir: ../mdw/.temp
    
    hub.url: https://mdw-demo.useast.appfog.ctl.io/mdw
    services.url: http://mdw-demo.useast.appfog.ctl.io:80/mdw
    
    logging:
      level: DEBUG
      
    script:
      executors:
        groovy: com.centurylink.mdw.script.GroovyExecutor
        javascript: com.centurylink.mdw.script.JavaScriptExecutor
        
  mdw_access: |
    upstreamHosts:
      - 127.0.0.1
      - 0:0:0:0:0:0:0:1
      - 172.26.131.144
      - 151.117.164.97
      - 151.117.164.49
      - 151.117.164.50
      - 151.117.164.51
        
    authMethod: mdw 
  
    forwardingHeader: x-forwarded-for 
    
    responseHeaders:
      X-UA-Compatible: IE=Edge
      
    sessionTimeout: 3600
    
    authExclusions:
      - '/login'
      - '/error'
      - '/js/nav.json'
      - '/images/*'
      - '/css/*'
      - '/doc/*'
      - '/api/*'
      - '/services/AppSummary'
      - '/services/System/sysInfo'
      - '/services/com/centurylink/mdw/slack'
      - '*.css'
      - '*.jsx'
      - '*.png'
      - '*.js'
      - '*.woff'
      - '*.woff2'
      - '*.ttf'
    
    loggingOptions:
      logResponseTimes: false  
      logHeaders: false
      logParameters: false      
  
  mdw_seed_users: '{
    "users":  [
      {
        "name": "MDW Application",
        "id": "mdwapp",
        "attributes": {
          "emailAddress": "mdwapp@centurylink.com"
        },      
        "groups": [
          "Developers",
          "Site Admin"
        ],
        "roles": [
          "User Admin",
          "Process Execution",
          "Process Design",
          "Task Execution"
        ]            
      }
    ]
  }'